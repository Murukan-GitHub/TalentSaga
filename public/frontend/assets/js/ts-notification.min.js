'use strict';

(function (window, document, $, undefined) {

    buildNotification();
    bindEvent();

    var IS_ACTIVE = 'is-active';
    var AUTO_HIDE_DURATION = 7000;
    var STATES = {
        success: 'tf-notification--success',
        warning: 'tf-notification--warning',
        error: 'tf-notification--error'
    };

    var $notif = $('.tf-notification');
    var $notifContent = $('.tf-notification-content');

    function show(msg, state) {
        $notifContent.empty().append(msg);

        $notif.addClass(STATES[state]).addClass(IS_ACTIVE);

        setTimeout(removeNotification, AUTO_HIDE_DURATION);
    }

    function removeNotification() {
        $('.tf-notification').removeClass(IS_ACTIVE);
    }

    function buildNotification() {
        var $el = $('\n            <div class="tf-notification">\n                <div class="container">\n                    <div class="tf-notification-content"></div>\n                    <button type="button">&times;</button>\n                </div>\n            </div>\n        ');

        $(document.body).append($el);
    }

    function bindEvent() {
        $(document.body).on('click', '.tf-notification button', removeNotification);
    }

    window.tsNotif = {
        show: show
    };
})(window, document, jQuery);